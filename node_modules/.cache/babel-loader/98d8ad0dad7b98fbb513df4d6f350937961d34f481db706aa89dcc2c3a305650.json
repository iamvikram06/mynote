{"ast":null,"code":"const STORAGE_KEY = \"mynote.notes.v1\";\nfunction generateId() {\n  try {\n    if (typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\") {\n      return crypto.randomUUID();\n    }\n  } catch {}\n  // Fallback for older browsers\n  const randomPart = Math.random().toString(16).slice(2);\n  return `${Date.now()}-${randomPart}`;\n}\nexport function loadNotes() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return [];\n    const parsed = JSON.parse(raw);\n    if (!Array.isArray(parsed)) return [];\n    return parsed.map(n => ({\n      id: n.id || generateId(),\n      title: n.title || \"Untitled\",\n      content: n.content || \"\",\n      tags: Array.isArray(n.tags) ? n.tags : [],\n      colorClass: n.colorClass || null,\n      updatedAt: typeof n.updatedAt === \"number\" ? n.updatedAt : Date.now()\n    }));\n  } catch (error) {\n    console.warn(\"Failed to load notes:\", error);\n    return [];\n  }\n}\nexport function saveNotes(notes) {\n  try {\n    if (!Array.isArray(notes)) {\n      console.warn(\"Attempted to save non-array notes:\", notes);\n      return;\n    }\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));\n  } catch (error) {\n    console.warn(\"Failed to save notes:\", error);\n  }\n}","map":{"version":3,"names":["STORAGE_KEY","generateId","crypto","randomUUID","randomPart","Math","random","toString","slice","Date","now","loadNotes","raw","localStorage","getItem","parsed","JSON","parse","Array","isArray","map","n","id","title","content","tags","colorClass","updatedAt","error","console","warn","saveNotes","notes","setItem","stringify"],"sources":["E:/Projects/mynote/src/utils/storage.js"],"sourcesContent":["const STORAGE_KEY = \"mynote.notes.v1\";\r\n\r\nfunction generateId() {\r\n  try {\r\n    if (typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\") {\r\n      return crypto.randomUUID();\r\n    }\r\n  } catch {}\r\n  // Fallback for older browsers\r\n  const randomPart = Math.random().toString(16).slice(2);\r\n  return `${Date.now()}-${randomPart}`;\r\n}\r\n\r\nexport function loadNotes() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    if (!raw) return [];\r\n    const parsed = JSON.parse(raw);\r\n    if (!Array.isArray(parsed)) return [];\r\n    return parsed.map((n) => ({\r\n      id: n.id || generateId(),\r\n      title: n.title || \"Untitled\",\r\n      content: n.content || \"\",\r\n      tags: Array.isArray(n.tags) ? n.tags : [],\r\n      colorClass: n.colorClass || null,\r\n      updatedAt: typeof n.updatedAt === \"number\" ? n.updatedAt : Date.now(),\r\n    }));\r\n  } catch (error) {\r\n    console.warn(\"Failed to load notes:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveNotes(notes) {\r\n  try {\r\n    if (!Array.isArray(notes)) {\r\n      console.warn(\"Attempted to save non-array notes:\", notes);\r\n      return;\r\n    }\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));\r\n  } catch (error) {\r\n    console.warn(\"Failed to save notes:\", error);\r\n  }\r\n}\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,iBAAiB;AAErC,SAASC,UAAUA,CAAA,EAAG;EACpB,IAAI;IACF,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACC,UAAU,KAAK,UAAU,EAAE;MAC5E,OAAOD,MAAM,CAACC,UAAU,CAAC,CAAC;IAC5B;EACF,CAAC,CAAC,MAAM,CAAC;EACT;EACA,MAAMC,UAAU,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;EACtD,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIN,UAAU,EAAE;AACtC;AAEA,OAAO,SAASO,SAASA,CAAA,EAAG;EAC1B,IAAI;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAACd,WAAW,CAAC;IAC7C,IAAI,CAACY,GAAG,EAAE,OAAO,EAAE;IACnB,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC;IAC9B,IAAI,CAACM,KAAK,CAACC,OAAO,CAACJ,MAAM,CAAC,EAAE,OAAO,EAAE;IACrC,OAAOA,MAAM,CAACK,GAAG,CAAEC,CAAC,KAAM;MACxBC,EAAE,EAAED,CAAC,CAACC,EAAE,IAAIrB,UAAU,CAAC,CAAC;MACxBsB,KAAK,EAAEF,CAAC,CAACE,KAAK,IAAI,UAAU;MAC5BC,OAAO,EAAEH,CAAC,CAACG,OAAO,IAAI,EAAE;MACxBC,IAAI,EAAEP,KAAK,CAACC,OAAO,CAACE,CAAC,CAACI,IAAI,CAAC,GAAGJ,CAAC,CAACI,IAAI,GAAG,EAAE;MACzCC,UAAU,EAAEL,CAAC,CAACK,UAAU,IAAI,IAAI;MAChCC,SAAS,EAAE,OAAON,CAAC,CAACM,SAAS,KAAK,QAAQ,GAAGN,CAAC,CAACM,SAAS,GAAGlB,IAAI,CAACC,GAAG,CAAC;IACtE,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOkB,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAEF,KAAK,CAAC;IAC5C,OAAO,EAAE;EACX;AACF;AAEA,OAAO,SAASG,SAASA,CAACC,KAAK,EAAE;EAC/B,IAAI;IACF,IAAI,CAACd,KAAK,CAACC,OAAO,CAACa,KAAK,CAAC,EAAE;MACzBH,OAAO,CAACC,IAAI,CAAC,oCAAoC,EAAEE,KAAK,CAAC;MACzD;IACF;IACAnB,YAAY,CAACoB,OAAO,CAACjC,WAAW,EAAEgB,IAAI,CAACkB,SAAS,CAACF,KAAK,CAAC,CAAC;EAC1D,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdC,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAEF,KAAK,CAAC;EAC9C;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}