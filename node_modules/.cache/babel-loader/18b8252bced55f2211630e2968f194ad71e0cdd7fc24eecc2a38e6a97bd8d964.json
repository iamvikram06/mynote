{"ast":null,"code":"const STORAGE_KEY=\"mynote.notes.v1\";function generateId(){try{if(typeof crypto!==\"undefined\"&&typeof crypto.randomUUID===\"function\"){return crypto.randomUUID();}}catch(_unused){}// Fallback for older browsers\nconst randomPart=Math.random().toString(16).slice(2);return\"\".concat(Date.now(),\"-\").concat(randomPart);}export function loadNotes(){try{const raw=localStorage.getItem(STORAGE_KEY);if(!raw)return[];const parsed=JSON.parse(raw);if(!Array.isArray(parsed))return[];return parsed.map(n=>({id:n.id||generateId(),title:n.title||\"Untitled\",content:n.content||\"\",tags:Array.isArray(n.tags)?n.tags:[],colorClass:n.colorClass||null,updatedAt:typeof n.updatedAt===\"number\"?n.updatedAt:Date.now()}));}catch(error){console.warn(\"Failed to load notes:\",error);return[];}}export function saveNotes(notes){try{if(!Array.isArray(notes)){console.warn(\"Attempted to save non-array notes:\",notes);return;}localStorage.setItem(STORAGE_KEY,JSON.stringify(notes));}catch(error){console.warn(\"Failed to save notes:\",error);}}","map":{"version":3,"names":["STORAGE_KEY","generateId","crypto","randomUUID","_unused","randomPart","Math","random","toString","slice","concat","Date","now","loadNotes","raw","localStorage","getItem","parsed","JSON","parse","Array","isArray","map","n","id","title","content","tags","colorClass","updatedAt","error","console","warn","saveNotes","notes","setItem","stringify"],"sources":["E:/Projects/mynote/src/utils/storage.js"],"sourcesContent":["const STORAGE_KEY = \"mynote.notes.v1\";\r\n\r\nfunction generateId() {\r\n  try {\r\n    if (\r\n      typeof crypto !== \"undefined\" &&\r\n      typeof crypto.randomUUID === \"function\"\r\n    ) {\r\n      return crypto.randomUUID();\r\n    }\r\n  } catch {}\r\n  // Fallback for older browsers\r\n  const randomPart = Math.random().toString(16).slice(2);\r\n  return `${Date.now()}-${randomPart}`;\r\n}\r\n\r\nexport function loadNotes() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_KEY);\r\n    if (!raw) return [];\r\n    const parsed = JSON.parse(raw);\r\n    if (!Array.isArray(parsed)) return [];\r\n    return parsed.map((n) => ({\r\n      id: n.id || generateId(),\r\n      title: n.title || \"Untitled\",\r\n      content: n.content || \"\",\r\n      tags: Array.isArray(n.tags) ? n.tags : [],\r\n      colorClass: n.colorClass || null,\r\n      updatedAt: typeof n.updatedAt === \"number\" ? n.updatedAt : Date.now(),\r\n    }));\r\n  } catch (error) {\r\n    console.warn(\"Failed to load notes:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveNotes(notes) {\r\n  try {\r\n    if (!Array.isArray(notes)) {\r\n      console.warn(\"Attempted to save non-array notes:\", notes);\r\n      return;\r\n    }\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));\r\n  } catch (error) {\r\n    console.warn(\"Failed to save notes:\", error);\r\n  }\r\n}\r\n"],"mappings":"AAAA,KAAM,CAAAA,WAAW,CAAG,iBAAiB,CAErC,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,GAAI,CACF,GACE,MAAO,CAAAC,MAAM,GAAK,WAAW,EAC7B,MAAO,CAAAA,MAAM,CAACC,UAAU,GAAK,UAAU,CACvC,CACA,MAAO,CAAAD,MAAM,CAACC,UAAU,CAAC,CAAC,CAC5B,CACF,CAAE,MAAAC,OAAA,CAAM,CAAC,CACT;AACA,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CACtD,SAAAC,MAAA,CAAUC,IAAI,CAACC,GAAG,CAAC,CAAC,MAAAF,MAAA,CAAIL,UAAU,EACpC,CAEA,MAAO,SAAS,CAAAQ,SAASA,CAAA,CAAG,CAC1B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGC,YAAY,CAACC,OAAO,CAAChB,WAAW,CAAC,CAC7C,GAAI,CAACc,GAAG,CAAE,MAAO,EAAE,CACnB,KAAM,CAAAG,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC,CAC9B,GAAI,CAACM,KAAK,CAACC,OAAO,CAACJ,MAAM,CAAC,CAAE,MAAO,EAAE,CACrC,MAAO,CAAAA,MAAM,CAACK,GAAG,CAAEC,CAAC,GAAM,CACxBC,EAAE,CAAED,CAAC,CAACC,EAAE,EAAIvB,UAAU,CAAC,CAAC,CACxBwB,KAAK,CAAEF,CAAC,CAACE,KAAK,EAAI,UAAU,CAC5BC,OAAO,CAAEH,CAAC,CAACG,OAAO,EAAI,EAAE,CACxBC,IAAI,CAAEP,KAAK,CAACC,OAAO,CAACE,CAAC,CAACI,IAAI,CAAC,CAAGJ,CAAC,CAACI,IAAI,CAAG,EAAE,CACzCC,UAAU,CAAEL,CAAC,CAACK,UAAU,EAAI,IAAI,CAChCC,SAAS,CAAE,MAAO,CAAAN,CAAC,CAACM,SAAS,GAAK,QAAQ,CAAGN,CAAC,CAACM,SAAS,CAAGlB,IAAI,CAACC,GAAG,CAAC,CACtE,CAAC,CAAC,CAAC,CACL,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,uBAAuB,CAAEF,KAAK,CAAC,CAC5C,MAAO,EAAE,CACX,CACF,CAEA,MAAO,SAAS,CAAAG,SAASA,CAACC,KAAK,CAAE,CAC/B,GAAI,CACF,GAAI,CAACd,KAAK,CAACC,OAAO,CAACa,KAAK,CAAC,CAAE,CACzBH,OAAO,CAACC,IAAI,CAAC,oCAAoC,CAAEE,KAAK,CAAC,CACzD,OACF,CACAnB,YAAY,CAACoB,OAAO,CAACnC,WAAW,CAAEkB,IAAI,CAACkB,SAAS,CAACF,KAAK,CAAC,CAAC,CAC1D,CAAE,MAAOJ,KAAK,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,uBAAuB,CAAEF,KAAK,CAAC,CAC9C,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}